<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="robots" content="noindex, nofollow">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        html, body { margin: 0; padding: 0; }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ãƒãƒ¼ */
        .header {
            background-color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid #ccc;
            padding: 10px 20px;
            height: 100px;
            position: sticky;
            top: 0;
            z-index: 999;
        }
        .header-content {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .header-icon {
            width: 90px;
            height: 90px;
            object-fit: cover;
            margin-right: 30px;
        }
        .header-title {
            font-size: 60px;
            color: hotpink;
            font-family: 'Arial', 'Helvetica', sans-serif;
            font-weight: bold;
            text-align: center;
        }

        /* ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
        .menu-btn {
            position: absolute;
            top: 50%;
            right: 20px;
            width: 80px;
            height: 50px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transform: translateY(-50%);
            cursor: pointer;
            z-index: 1001;
        }
        .menu-btn span {
            display: block;
            height: 6px;
            background: #333;
            border-radius: 2px;
        }

        /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®æ  */
        .menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('/static/images/menu_bg.png') no-repeat center center;
            background-size: cover;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            z-index: 1000;
        }
        .menu.active {
            opacity: 1;
            pointer-events: auto;
        }
        .menu a {
            display: block;
            margin: 60px 0;
            font-size: 50px;
            color: #fff;
            text-decoration: none;
            transition: color 0.3s;
        }
        .close-btn {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 80px;
            color: rgb(0, 0, 0);
            cursor: pointer;
        }

        /* ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼ï¼ˆæ—¢å­˜ï¼‰ */
        .slideshow-container {
            max-width: 900px;
            height: 675px;
            margin: 30px auto;
            position: relative;
            overflow: hidden;
            background-color: #fff;
            border-radius: 0px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        .slides-wrapper {
            display: flex;
            transition: transform 0.2s ease-in-out;
            width: 5400px; /* 900px Ã— 6æš */
        }
        .slides-wrapper img {
            width: 900px;
            height: 675px;
            object-fit: cover;
            flex-shrink: 0;
        }

        /* ãƒ‰ãƒƒãƒˆãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ—¢å­˜ï¼‰ */
        .dots {
            text-align: center;
            margin-top: 15px;
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            z-index: 10;
        }
        .dots span {
            display: inline-block;
            width: 10px;
            height: 10px;
            margin: 0 5px;
            background-color: #ccc;
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .dots span.active {
            background-color: #ff69b4;
        }

        /* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .calendar-container {
        position: relative;
        max-width: 900px; /* å…ƒã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å¹… */
        margin: 20px auto;
        box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        overflow: hidden; /* ã¯ã¿å‡ºã—ã‚’éš ã™ */
        }
    

        .calendar-wrapper {
        display: flex;
        width: 200%; /* ç”»åƒ2æšåˆ† */
        transition: transform 0.3s ease;
        }

        .calendar-wrapper img {
        width: 50%;   /* æ¨ªå¹…ã«ãƒ•ã‚£ãƒƒãƒˆ */
        height: auto;  /* ç¸¦ã¯æ¯”ç‡ç¶­æŒ */
        flex-shrink: 0;
        }
        .calendar-dots {
            text-align: center;
            margin-top: 10px;
        }
        .calendar-dots span {
            display: inline-block;
            width: 10px;
            height: 10px;
            margin: 0 5px;
            background-color: #ccc;
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .calendar-dots span.active {
            background-color: #ff69b4;
        }

        /* ã‚¹ãƒãƒ›ç­‰ã§ã‚¿ãƒƒãƒæ“ä½œã‚’å„ªå…ˆã™ã‚‹ãŸã‚ã®è¨­å®š */
        .calendar-wrapper, .slides-wrapper {
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
            touch-action: pan-y;
        }

        /* 2Ã—2 ã‚°ãƒªãƒƒãƒ‰é…ç½® */
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr; /* å·¦å³2åˆ— */
            gap: -200px 50px; /* ã“ã“ã§ä½ç½®èª¿æ•´ï¼ï¼è¡Œé–“-200px, åˆ—é–“50px */
            max-width: 900px;
            margin: 50px auto; /* ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼ã‹ã‚‰ã®ä½™ç™½ */
            justify-items: center;
            align-items: end; /* ã“ã“ã‚’è¿½åŠ ï¼šä¸‹ç«¯ã«æƒãˆã‚‹ */
        }

        .content-grid .image-button img {
            width: 400px;
            height: auto;
            box-shadow: none;
            border-radius: 10px;
            transition: transform 0.2s;
            display: block;
        }
        .content-grid .image-button img:hover {
            transform: scale(1.05);
        }
        /* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¿ã‚¤ãƒˆãƒ« */
        .calendar-title {
            max-width: 900px;       /* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¨åŒã˜å¹… */
            margin: 0 auto -15px;    /* ä¸Šãƒãƒ¼ã‚¸ãƒ³0ã€ä¸‹ãƒãƒ¼ã‚¸ãƒ³-15px */
            text-align: left;       /* å·¦å¯„ã› */
            font-size: 18px;        /* ãŠå¥½ã¿ã§ã‚µã‚¤ã‚ºèª¿æ•´ */
            color: #888888;         /* ã‚°ãƒ¬ãƒ¼ */
            font-weight: bold;      /* å¤ªå­—ã«ã™ã‚‹å ´åˆ */
            font-weight: 400;  /* å¤ªå­—â†’é€šå¸¸ã®ç´°ã• */
            font-family: 'Arial', 'Helvetica', sans-serif;
        }
    </style>
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ãƒãƒ¼ -->
    <div class="header">
        <div class="header-content">
            <img src="/static/images/icon.jpeg" alt="ã‚¢ã‚¤ã‚³ãƒ³" class="header-icon">
            <span class="header-title">FC.Rose</span>
        </div>
        <div class="menu-btn" id="menu-btn">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>

    <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼æœ¬ä½“ -->
    <nav class="menu" id="menu">
        <div class="close-btn">âœ•</div>
        <a href="/about">ã‚µãƒ¼ã‚¯ãƒ«ã®èª¬æ˜</a>
        <a href="https://forms.gle/YrcrBgRyub1ftP4L8" target="_blank">ã‚µãƒ¼ã‚¯ãƒ«ã¸ã®ææ¡ˆãƒ•ã‚©ãƒ¼ãƒ </a>
        <a href="/profile">ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±</a>
        <a href="#">ã‚¤ãƒ™ãƒ³ãƒˆå‚åŠ ãƒ•ã‚©ãƒ¼ãƒ </a>
        <a href="/photo">ãƒ­ã‚¼å†™çœŸé›†</a>
        <a href="/quiz_home">ãƒ­ã‚¼æ¤œå®š</a>
        <a href="{{ url_for('manual') }}">å¹¹éƒ¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</a>
        <a href="https://www.instagram.com/meiji_fc.rose?igsh=MTl0Njk3cGJtdXVhZw%3D%3D&utm_source=qr" target="_blank">ğŸ“· Instagram</a>
    </nav>

    <!-- ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼éƒ¨åˆ†ï¼ˆæ—¢å­˜4æšã€è‡ªå‹•ï¼‰ -->
    <div class="slideshow-container">
        <div class="slides-wrapper" id="slidesWrapper">
            <img src="/static/images/rose4.jpeg" alt="clone4">
            <img src="/static/images/rose1.jpeg" alt="ã‚¹ãƒ©ã‚¤ãƒ‰1">
            <img src="/static/images/rose2.jpeg" alt="ã‚¹ãƒ©ã‚¤ãƒ‰2">
            <img src="/static/images/rose3.JPG" alt="ã‚¹ãƒ©ã‚¤ãƒ‰3">
            <img src="/static/images/rose4.jpeg" alt="ã‚¹ãƒ©ã‚¤ãƒ‰4">
            <img src="/static/images/rose1.jpeg" alt="clone1">
        </div>
        <div class="dots" id="dotsContainer"></div>
    </div>

    <!-- ã‚°ãƒªãƒƒãƒ‰é…ç½®éƒ¨åˆ† -->
    <div class="content-grid">
        <!-- ä¸Šæ®µ -->
        <a href="/profile" class="image-button">
            <img src="{{ url_for('static', filename='images/14.png') }}" alt="ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±">
        </a>
        <a href="/entry" class="image-button">
            <img src="{{ url_for('static', filename='images/12.png') }}" alt="ã‚¤ãƒ™ãƒ³ãƒˆå‚åŠ ãƒ•ã‚©ãƒ¼ãƒ ">
        </a>

        <!-- ä¸‹æ®µ -->
        <a href="{{ url_for('photo') }}" class="image-button">
            <img src="{{ url_for('static', filename='images/13.png') }}" alt="ãƒ­ã‚¼å†™çœŸé›†">
        </a>
        <a href="{{ url_for('quiz_home') }}" class="image-button">
            <img src="{{ url_for('static', filename='images/11.png') }}" alt="ãƒ­ã‚¼æ¤œå®š">
        </a>
    </div>

    <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¿ã‚¤ãƒˆãƒ« -->
    <div class="calendar-title">FC.Roseæœˆé–“äºˆå®šè¡¨</div>
    <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ -->
    <div class="calendar-container">
    <div class="calendar-wrapper" id="calendarWrapper">
        <img src="{{ url_for('static', filename='images/calendar20259.png') }}" alt="Calendar 1">
        <img src="{{ url_for('static', filename='images/calendar202510.png') }}" alt="Calendar 2">
    </div>
    <div class="dots" id="calendarDots"></div>
    </div>

    <!-- ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæœ€å¾Œã¾ã§ï¼‰ -->
    <script>
    // -------------------- ãƒ¡ãƒ‹ãƒ¥ãƒ¼é–‹é–‰ --------------------
    document.getElementById("menu-btn").addEventListener("click", function() {
        document.getElementById("menu").classList.toggle("active");
    });
    document.querySelector(".close-btn").addEventListener("click", function() {
        document.getElementById("menu").classList.remove("active");
    });

    // -------------------- æ—¢å­˜ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼ï¼ˆè‡ªå‹•4æšï¼‰ --------------------
    (function(){
        const slidesWrapper = document.getElementById('slidesWrapper');
        const slideWidth = 900;
        const totalSlides = 4;
        let currentIndex = 1;
        let isAnimating = false;

        // ãƒ‰ãƒƒãƒˆç”Ÿæˆ
        const dotsContainer = document.getElementById('dotsContainer');
        for (let i=0;i<totalSlides;i++){
            const dot=document.createElement('span');
            if(i===0) dot.classList.add('active');
            dot.addEventListener('click', (e)=>{
                if(isAnimating) return;
                moveToSlide(i+1);
            });
            dotsContainer.appendChild(dot);
        }
        const dots = dotsContainer.querySelectorAll('span');

        function updateDots(index){
            dots.forEach(d=>d.classList.remove('active'));
            dots[index % totalSlides].classList.add('active');
        }

        function moveToSlide(index){
            if(isAnimating) return;
            isAnimating=true;
            slidesWrapper.style.transition="transform 0.5s ease-in-out";
            slidesWrapper.style.transform=`translateX(${-index*slideWidth}px)`;
            currentIndex=index;
            setTimeout(()=>{
                if(currentIndex===0){
                    slidesWrapper.style.transition="none";
                    slidesWrapper.style.transform=`translateX(${-totalSlides*slideWidth}px)`;
                    currentIndex=totalSlides;
                } else if(currentIndex===totalSlides+1){
                    slidesWrapper.style.transition="none";
                    slidesWrapper.style.transform=`translateX(${-slideWidth}px)`;
                    currentIndex=1;
                }
                updateDots(currentIndex-1);
                isAnimating=false;
            },500);
        }

        function nextSlide(){ moveToSlide(currentIndex+1); }

        // åˆæœŸãƒã‚¸ã‚·ãƒ§ãƒ³
        slidesWrapper.style.transform=`translateX(${-slideWidth}px)`;

        // è‡ªå‹•ã‚¹ãƒ©ã‚¤ãƒ‰ï¼ˆæ—¢å­˜ï¼‰
        setInterval(nextSlide,5000);

        // ã‚¿ãƒƒãƒã‚¹ãƒ¯ã‚¤ãƒ—ï¼ˆæ—¢å­˜ï¼‰
        let startX=0,startY=0,isSwiping=false,isHorizontalSwipe=false;
        slidesWrapper.addEventListener('touchstart',function(e){
            startX=e.touches[0].clientX;
            startY=e.touches[0].clientY;
            isSwiping=true;
            isHorizontalSwipe=false;
        },{passive:true});
        slidesWrapper.addEventListener('touchmove',function(e){
            if(!isSwiping) return;
            const currentX=e.touches[0].clientX;
            const currentY=e.touches[0].clientY;
            const diffX=currentX-startX;
            const diffY=currentY-startY;
            if(!isHorizontalSwipe && Math.abs(diffX)>Math.abs(diffY)){
                isHorizontalSwipe=true;
                e.preventDefault();
            }
            if(isHorizontalSwipe){
                slidesWrapper.style.transition='none';
                slidesWrapper.style.transform=`translateX(${-currentIndex*slideWidth+diffX}px)`;
            }
        },{passive:false});
        slidesWrapper.addEventListener('touchend',function(e){
            if(!isSwiping) return;
            const endX=e.changedTouches[0].clientX;
            const diffX=endX-startX;
            if(isHorizontalSwipe){
                slidesWrapper.style.transition='transform 0.15s ease-out';
                if(diffX>50) moveToSlide(currentIndex-1);
                else if(diffX<-50) moveToSlide(currentIndex+1);
                else moveToSlide(currentIndex);
            }
            isSwiping=false;
            isHorizontalSwipe=false;
        });
    })();

    // -------------------- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼ˆæ‰‹å‹•ã‚¹ãƒ¯ã‚¤ãƒ—ãƒ»ãƒ‰ãƒƒãƒˆãƒ»å·¦å³å¾€å¾©å¯ãƒ»ãƒœã‚¿ãƒ³ç„¡ã—ï¼‰ --------------------
    (function(){
        const calendarWrapper = document.getElementById('calendarWrapper');
        const calendarImgs = Array.from(calendarWrapper.querySelectorAll('img'));
        const calendarDotsContainer = document.getElementById('calendarDots');
        let currentCalendar = 0;
        let imgWidth = null; // ãƒ”ã‚¯ã‚»ãƒ«å¹…ï¼ˆnaturalWidth ã‚’ä½¿ã†ï¼‰

        // ãƒ‰ãƒƒãƒˆä½œæˆ
        calendarImgs.forEach((_,i)=>{
            const dot = document.createElement('span');
            if(i===0) dot.classList.add('active');
            dot.addEventListener('click', ()=> showCalendar(i));
            calendarDotsContainer.appendChild(dot);
        });
        const calendarDots = calendarDotsContainer.querySelectorAll('span');

        function updateCalendarDots(index){
            calendarDots.forEach(d=>d.classList.remove('active'));
            calendarDots[index].classList.add('active');
        }

        // ç”»åƒèª­ã¿è¾¼ã¿ã‚’å¾…ã£ã¦å¹…ã‚’è¨­å®šï¼ˆnaturalWidth ã‚’å„ªå…ˆï¼‰
        function computeImgWidth(){
            const container = document.querySelector('.calendar-container');
            imgWidth = container.offsetWidth; // â† containerã®å¹…ã«ã™ã‚‹
            calendarImgs.forEach(img=>{
                img.style.width = imgWidth + 'px';
                img.style.height = 'auto';
            });
            calendarWrapper.style.transform = `translateX(${-currentCalendar * imgWidth}px)`;
        }

        // ç”»åƒãŒå…¨ã¦èª­ã¿è¾¼ã¾ã‚ŒãŸã‚‰ compute
        let loadedCount = 0;
        calendarImgs.forEach(img=>{
            if(img.complete && img.naturalWidth !== 0){
                loadedCount++;
            } else {
                img.addEventListener('load', ()=> {
                    loadedCount++;
                    if(loadedCount === calendarImgs.length) computeImgWidth();
                });
            }
        });
        // æ—¢ã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹å ´åˆ
        if(loadedCount === calendarImgs.length){
            computeImgWidth();
        } else {
            // ãã‚Œã§ã‚‚å¿µã®ãŸã‚æœ€å°é…å»¶ã§å®Ÿè¡Œ
            setTimeout(()=>{ if(!imgWidth) computeImgWidth(); }, 300);
        }

        // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚ºæ™‚ã«å†è¨ˆç®—
        window.addEventListener('resize', function(){
            // å†è¨ˆç®—ï¼šä½¿ã„ã‚„ã™ãã™ã‚‹ãŸã‚ã€ä½¿ãˆã‚‹ naturalWidth ã‚’å†å–å¾—
            computeImgWidth();
        });

        function showCalendar(index){
            // ç¯„å›²å†…ã«ã‚¯ãƒ©ãƒ³ãƒ—
            if(index < 0) index = 0;
            if(index > calendarImgs.length - 1) index = calendarImgs.length - 1;
            currentCalendar = index;
            calendarWrapper.style.transition = 'transform 0.3s ease';
            calendarWrapper.style.transform = `translateX(${-currentCalendar * imgWidth}px)`;
            updateCalendarDots(currentCalendar);
        }

        // ã‚¹ãƒ¯ã‚¤ãƒ—å‡¦ç†ï¼ˆã‚¿ãƒƒãƒãƒ»ãƒã‚¦ã‚¹ä¸¡å¯¾å¿œï¼‰
        let startX = 0, startY = 0, isSwiping = false, isHorizontal = false;

        // touchstart / mousedown
        calendarWrapper.addEventListener('touchstart', function(e){
            startX = e.touches[0].clientX;
            startY = e.touches[0].clientY;
            isSwiping = true;
            isHorizontal = false;
            calendarWrapper.style.transition = 'none';
        }, {passive:true});
        calendarWrapper.addEventListener('mousedown', function(e){
            startX = e.clientX;
            startY = e.clientY;
            isSwiping = true;
            isHorizontal = false;
            calendarWrapper.style.transition = 'none';
            // prevent text/image drag default
            e.preventDefault();
        });

        // touchmove / mousemove
        function onMove(clientX, clientY){
            if(!isSwiping) return;
            const diffX = clientX - startX;
            const diffY = clientY - startY;
            if(!isHorizontal && Math.abs(diffX) > Math.abs(diffY)){
                isHorizontal = true;
            }
            if(isHorizontal){
                // move visually by diffX, relative to current index
                calendarWrapper.style.transform = `translateX(${-currentCalendar * imgWidth + diffX}px)`;
            }
        }
        calendarWrapper.addEventListener('touchmove', function(e){
            if(!isSwiping) return;
            onMove(e.touches[0].clientX, e.touches[0].clientY);
            // prevent vertical scroll when horizontal swipe detected
            if(isHorizontal) e.preventDefault();
        }, {passive:false});
        document.addEventListener('mousemove', function(e){
            onMove(e.clientX, e.clientY);
        });

        // touchend / mouseup
        function endSwipe(clientX){
            if(!isSwiping) return;
            const diffX = clientX - startX;
            calendarWrapper.style.transition = 'transform 0.25s ease';
            const threshold = Math.max(30, imgWidth * 0.08); // 30px or 8%å¹…
            if(diffX > threshold){
                // swipe right -> previous
                showCalendar(Math.max(currentCalendar - 1, 0));
            } else if(diffX < -threshold){
                // swipe left -> next
                showCalendar(Math.min(currentCalendar + 1, calendarImgs.length - 1));
            } else {
                // restore
                showCalendar(currentCalendar);
            }
            isSwiping = false;
            isHorizontal = false;
        }
        calendarWrapper.addEventListener('touchend', function(e){
            endSwipe(e.changedTouches[0].clientX);
        });
        document.addEventListener('mouseup', function(e){
            endSwipe(e.clientX);
        });

        // ãƒ‰ãƒƒãƒˆã‚¯ãƒªãƒƒã‚¯
        calendarDots.forEach((dot, i) => {
            dot.addEventListener('click', () => showCalendar(i));
        });

        // åˆæœŸãƒ‰ãƒƒãƒˆçŠ¶æ…‹
        updateCalendarDots(0);
    })();
    </script>

    <!-- ä»–ãƒšãƒ¼ã‚¸ãƒªãƒ³ã‚¯ -->
    <p style="text-align:center;"><a href="/profile">ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±ã‚’è¦‹ã‚‹ï¼ˆPDFï¼‰</a></p>
    <p style="text-align:center;"><a href="/entry">ã‚¤ãƒ™ãƒ³ãƒˆå‚åŠ ãƒ•ã‚©ãƒ¼ãƒ </a></p>
    <p style="text-align:center;"><a href="/about">FC.Roseã®ç´¹ä»‹ã‚’è¦‹ã‚‹</a></p>
    <p style="text-align:center;"><a href="{{ url_for('photo') }}">ãƒ­ã‚¼å†™çœŸé›†</a></p>
</body>
</html>